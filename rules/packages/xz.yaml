package: xz
rules:
  configure_flags:
    add:
    - --disable-doc
    - --disable-nls
    - --disable-scripts
    - --disable-xz
    - --disable-xzdec
    - --disable-lzmadec
    - --disable-lzmainfo
    - --enable-shared
    - --enable-static
  spec_replacements:
  - pattern: autoreconf -fi
    replacement: '# autoreconf -fi - skipped (pre-generated configure available)'
  - pattern: sed -i 's|^runpath_var=LD_RUN_PATH|runpath_var=DIE_RPATH_DIE|g' libtool
    replacement: 'sed -i ''s|^runpath_var=LD_RUN_PATH|runpath_var=DIE_RPATH_DIE|g'' libtool

      # Fix libtool for IRIX

      $MOGRIX_ROOT/tools/fix-libtool-irix.sh libtool || exit 1

      '
  - pattern: "Source100:\tcolorxzgrep.sh"
    replacement: '# Source100: colorxzgrep.sh - removed (conflict with mogrix compat)'
  - pattern: "Source101:\tcolorxzgrep.csh"
    replacement: '# Source101: colorxzgrep.csh - removed (conflict with mogrix compat)'
  - pattern: "Requires:\tgrep >= 2.20-5"
    replacement: '# Requires: grep >= 2.20-5 - not needed (scripts disabled)'
  - pattern: '%find_lang %name'
    replacement: '# %find_lang %name - skipped (minimal build)'
  - pattern: mkdir -p %{buildroot}%{profiledir}
    replacement: '# mkdir -p %{buildroot}%{profiledir} - skipped (scripts disabled)'
  - pattern: install -p -m 644 %{SOURCE100} %{buildroot}%{profiledir}
    replacement: '# install colorxzgrep.sh - skipped'
  - pattern: install -p -m 644 %{SOURCE101} %{buildroot}%{profiledir}
    replacement: '# install colorxzgrep.csh - skipped'
  - pattern: '%files -f %{name}.lang'
    replacement: '%files'
  - pattern: '%{_bindir}/*xz*'
    replacement: '# %{_bindir}/*xz* - binaries disabled'
  - pattern: '%{_mandir}/man1/*xz*'
    replacement: '# %{_mandir}/man1/*xz* - binaries disabled'
  - pattern: '%lang(de) %{_mandir}/de/man1/*xz*'
    replacement: ''
  - pattern: '%lang(fr) %{_mandir}/fr/man1/*xz*'
    replacement: ''
  - pattern: '%lang(ko) %{_mandir}/ko/man1/*xz*'
    replacement: ''
  - pattern: '%lang(ro) %{_mandir}/ro/man1/*xz*'
    replacement: ''
  - pattern: '%lang(uk) %{_mandir}/uk/man1/*xz*'
    replacement: ''
  - pattern: '%lang(pt_BR) %{_mandir}/pt_BR/man1/*xz*'
    replacement: ''
  - pattern: '%{profiledir}/*'
    replacement: ''
  - pattern: '%{_bindir}/*lz*'
    replacement: '# %{_bindir}/*lz* - binaries disabled'
  - pattern: '%{_mandir}/man1/*lz*'
    replacement: '# %{_mandir}/man1/*lz* - binaries disabled'
  - pattern: '%lang(de) %{_mandir}/de/man1/*lz*'
    replacement: ''
  - pattern: '%lang(fr) %{_mandir}/fr/man1/*lz*'
    replacement: ''
  - pattern: '%lang(ko) %{_mandir}/ko/man1/*lz*'
    replacement: ''
  - pattern: '%lang(ro) %{_mandir}/ro/man1/*lz*'
    replacement: ''
  - pattern: '%lang(uk) %{_mandir}/uk/man1/*lz*'
    replacement: ''
  - pattern: '%lang(pt_BR) %{_mandir}/pt_BR/man1/*lz*'
    replacement: ''
  - pattern: '%{_libdir}/lib*.so.5*'
    replacement: '%{_libdir}/liblzma.so*'
  - pattern: '%doc %{_pkgdocdir}'
    replacement: '# %doc %{_pkgdocdir} - docs disabled'
  - pattern: '%exclude %_pkgdocdir/examples*'
    replacement: ''
  - pattern: '%doc %_pkgdocdir/examples*'
    replacement: '# %doc examples* - docs disabled'
