# sl - Steam Locomotive joke command (FC40: 5.02)
# Links against ncurses (available in staging via SGUG-RSE)
package: sl

rules:
  spec_replacements:
    # sl's Makefile hardcodes link command as $(CC) $(CFLAGS) -o sl sl.c -lncurses
    # and ignores $(LDFLAGS). Bypass Makefile and compile directly.
    # -ltinfo needed because ncurses is split (libncurses + libtinfo) in staging.
    # $LIBS picks up mogrix-compat static archive from the build preamble.
    - pattern: 'make %{?_smp_mflags} CFLAGS="%{optflags}"'
      replacement: '%{__cc} %{optflags} -o sl sl.c -lncurses -ltinfo $LIBS'
