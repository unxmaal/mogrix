# xcb-util-keysyms 0.4.1 - XCB key constant/conversion functions (FC40: 0.4.1-5)
package: xcb-util-keysyms

rules:

  prep_commands:
    # IRIX X11R6.3 keysymdef.h is missing modern keysym definitions
    - "sed -i '1i #ifndef XK_ISO_Level5_Lock' keysyms/keysyms.c"
    - "sed -i '2i #define XK_ISO_Level5_Lock 0xfe13' keysyms/keysyms.c"
    - "sed -i '3i #endif' keysyms/keysyms.c"
    - "sed -i '4i #ifndef XK_Armenian_AYB' keysyms/keysyms.c"
    - "sed -i '5i #define XK_Armenian_AYB 0x1000531' keysyms/keysyms.c"
    - "sed -i '6i #endif' keysyms/keysyms.c"
    - "sed -i '7i #ifndef XK_Armenian_fe' keysyms/keysyms.c"
    - "sed -i '8i #define XK_Armenian_fe 0x1000586' keysyms/keysyms.c"
    - "sed -i '9i #endif' keysyms/keysyms.c"

  spec_replacements:
    - pattern: "Requires:       %{name}%{?_isa}"
      replacement: "Requires:       %{name}"
    - pattern: "%ldconfig_post"
      replacement: "# ldconfig_post removed"
    - pattern: "%ldconfig_postun"
      replacement: "# ldconfig_postun removed"
    - pattern: "URL:            http://xcb.freedesktop.org/"
      replacement: |
        URL:            http://xcb.freedesktop.org/
        Provides: libxcb-keysyms.so.1(mips-32)
    - pattern: "rm %{buildroot}%{_libdir}/*.la"
      replacement: "rm -f %{buildroot}%{_libdir}/*.la || true"


