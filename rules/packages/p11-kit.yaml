# p11-kit - PKCS#11 module support
# Has sgifixes patches, needs compat functions

package: p11-kit

# IRIX-specific patches from SGUG-RSE
add_patch:
  - p11-kit.sgifixes.patch

rules:
  # Compat functions needed

  # NOTE: libdicl drop_buildrequires/drop_requires handled by generic.yaml

  # Autoconf cache overrides
  # NOTE: ac_cv_func_malloc/realloc_0_nonnull handled by generic.yaml
  ac_cv_overrides:
    gl_cv_func_working_getdelim: "yes"

  # Configure flags
  configure_flags:
    add:
      - --without-systemd
      - --disable-doc
      - --without-bash-completion
    remove:
      - --with-trust-paths

