# elfutils - ELF utilities and library
# Has sgifixes patches, needs compat functions

package: elfutils


# IRIX-specific patches from SGUG-RSE
add_patch:
  - elfutils.sgifixes.patch

rules:
  # Compat functions needed
  inject_compat_functions:
    - strdup
    - strndup
    - getline
    - asprintf
    - vasprintf

  # NOTE: libdicl/systemtap-sdt-devel drop_buildrequires/drop_requires handled by generic.yaml

  # Autoconf cache overrides
  # NOTE: ac_cv_func_malloc/realloc_0_nonnull handled by generic.yaml
  ac_cv_overrides:
    ac_cv_func_mmap_fixed_mapped: "no"

  # Configure flags
  configure_flags:
    add:
      - --disable-debuginfod
      - --disable-libdebuginfod
      - --disable-valgrind
      - --disable-valgrind-annotations
      - --without-bzlib
      - --without-lzma
      - --without-zstd
    remove:
      - --enable-valgrind

  configure_disable:
    - nls

  # NOTE: libdicl remove_lines handled by generic.yaml
