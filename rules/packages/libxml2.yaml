package: libxml2
add_patch:
- libxml2-disable-check.patch
rules:
  configure_flags:
    add:
    - --without-python
    - --without-icu
    - --without-zlib
    - --without-lzma
    - --without-threads
    - --without-tls
    remove:
    - --with-python
    - --with-zlib
    - --with-lzma
    - --with-threads
    - --with-tls
  configure_disable:
  - static
  spec_replacements:
  - pattern: '%check'
    replacement: '%check

      exit 0

      # Original check section:'
  - pattern: '%make_build'
    replacement: '# Fix libtool to build shared libraries for IRIX

      $MOGRIX_ROOT/tools/fix-libtool-irix.sh libtool || exit 1

      %make_build

      '
  - pattern: '%package -n python3-libxml2'
    replacement: '# Disabled: %package -n python3-libxml2'
  - pattern: '%description -n python3-libxml2'
    replacement: '# Disabled: %description -n python3-libxml2'
  - pattern: '%files -n python3-libxml2'
    replacement: '# Disabled: %files -n python3-libxml2'
  - pattern: '%{python3_sitearch}/libxml2mod.so'
    replacement: ''
  - pattern: '%{python3_sitelib}/libxml2.py'
    replacement: ''
  - pattern: '%{python3_sitelib}/__pycache__/libxml2.*'
    replacement: ''
  - pattern: '%{python3_sitelib}/drv_libxml2.py'
    replacement: ''
  - pattern: '%{python3_sitelib}/__pycache__/drv_libxml2.*'
    replacement: ''
  - pattern: '%doc doc/apibuild.py'
    replacement: ''
