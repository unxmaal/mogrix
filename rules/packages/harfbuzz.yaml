package: harfbuzz
rules:
  drop_buildrequires:
  - gobject-introspection-devel
  - graphite2-devel
  - gtk-doc
  spec_replacements:
  - pattern: '%configure --disable-static --with-graphite2 --with-gobject --enable-introspection'
    replacement: 'export CXX="/opt/sgug-staging/usr/sgug/bin/irix-cxx"

      export CXXFLAGS="%{optflags}"

      %configure --disable-static --without-graphite2 --without-gobject --without-glib --disable-introspection --without-cairo --with-icu

      '
  - pattern: 'License:        MIT-Modern-Variant'
    replacement: 'License:        MIT-Modern-Variant

      Provides: libharfbuzz.so.0(mips-32)

      Provides: libharfbuzz-subset.so.0(mips-32)

      Provides: libharfbuzz-icu.so.0(mips-32)

      Provides: harfbuzz(mips-32) = %{version}-%{release}

      '
  - pattern: 'Requires:       %{name}%{?_isa} = %{version}-%{release}

      Requires:       %{name}-icu%{?_isa} = %{version}-%{release}'
    replacement: 'Requires:       %{name} = %{version}-%{release}'
  - pattern: '%ldconfig_scriptlets


      %ldconfig_scriptlets icu'
    replacement: '# ldconfig scriptlets removed for IRIX'
  - pattern: '%files

      %license COPYING

      %doc NEWS AUTHORS README

      %{_libdir}/libharfbuzz.so.0*

      %{_libdir}/libharfbuzz-cairo.so.*

      %{_libdir}/libharfbuzz-gobject.so.0*

      %{_libdir}/libharfbuzz-subset.so.0*

      %dir %{_libdir}/girepository-1.0

      %{_libdir}/girepository-1.0/HarfBuzz-0.0.typelib'
    replacement: '%files

      %license COPYING

      %doc NEWS AUTHORS README

      %{_libdir}/libharfbuzz.so.0*

      %{_libdir}/libharfbuzz-cairo.so.*

      %{_libdir}/libharfbuzz-subset.so.0*

      '
  - pattern: '%files devel

      %doc %{_datadir}/gtk-doc

      %{_bindir}/hb-info

      %{_bindir}/hb-view

      %{_bindir}/hb-ot-shape-closure

      %{_bindir}/hb-shape

      %{_bindir}/hb-subset

      %{_includedir}/harfbuzz/

      %{_libdir}/libharfbuzz.so

      %{_libdir}/libharfbuzz-gobject.so

      %{_libdir}/libharfbuzz-cairo.so

      %{_libdir}/libharfbuzz-icu.so

      %{_libdir}/libharfbuzz-subset.so

      %{_libdir}/pkgconfig/harfbuzz.pc

      %{_libdir}/pkgconfig/harfbuzz-cairo.pc

      %{_libdir}/pkgconfig/harfbuzz-gobject.pc

      %{_libdir}/pkgconfig/harfbuzz-icu.pc

      %{_libdir}/pkgconfig/harfbuzz-subset.pc

      %{_libdir}/cmake/harfbuzz/

      %dir %{_datadir}/gir-1.0

      %{_datadir}/gir-1.0/HarfBuzz-0.0.gir'
    replacement: '%files devel

      %doc %{_datadir}/gtk-doc

      %{_includedir}/harfbuzz/

      %{_libdir}/libharfbuzz.so

      %{_libdir}/libharfbuzz-cairo.so

      %{_libdir}/libharfbuzz-icu.so

      %{_libdir}/libharfbuzz-subset.so

      %{_libdir}/pkgconfig/harfbuzz.pc

      %{_libdir}/pkgconfig/harfbuzz-cairo.pc

      %{_libdir}/pkgconfig/harfbuzz-icu.pc

      %{_libdir}/pkgconfig/harfbuzz-subset.pc

      %{_libdir}/cmake/harfbuzz/

      '
  prep_commands:
  - sed -i 's/^SUBDIRS = src util test perf docs/SUBDIRS = src util docs/' Makefile.in
