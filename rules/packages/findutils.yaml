package: findutils
classes:
- nls-disabled
smoke_test:
- command: /usr/sgug/bin/find --version
  expect: 4.9.0
- command: /usr/sgug/bin/xargs --version
  expect: 4.9.0
rules:
  drop_buildrequires:
  - dejagnu
  spec_replacements:
  - pattern: autoreconf -fiv
    replacement: 'AUTOPOINT=true autoreconf -fiv

      sed -i ''s/gnulib-tests//'' Makefile.in || true

      sed -i ''s/gnulib-tests//'' Makefile.am || true

      # Fix gnulib stdint.in.h: AC_COMPUTE_INT produces empty values in cross-compile

      # which breaks SIG_ATOMIC_MAX (and potentially other type limits)

      sed -i ''s/@BITSIZEOF_SIG_ATOMIC_T@/32/g; s/@HAVE_SIGNED_SIG_ATOMIC_T@/1/g; s/@SIG_ATOMIC_T_SUFFIX@//g'' lib/stdint.in.h gl/lib/stdint.in.h 2>/dev/null || true'
  - pattern: '%{_infodir}/find.info*'
    replacement: '# %{_infodir}/find.info* (removed — no texinfo)'
  - pattern: '%{_infodir}/find-maint.info.*'
    replacement: '# %{_infodir}/find-maint.info.* (removed — no texinfo)'
  install_cleanup:
  - rm -rf %{buildroot}%{_infodir}
