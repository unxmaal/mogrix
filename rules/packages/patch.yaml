package: patch
smoke_test:
- command: /usr/sgug/bin/patch --version
  expect: 2.7.6
rules:
  inject_compat_functions:
  - posix_spawn
  drop_requires:
  - ed
  spec_replacements:
  - pattern: '%patch 100 -p1 -b .selinux'
    replacement: '# %patch 100 skipped - no SELinux on IRIX'
  install_cleanup:
  - rm -f %{buildroot}%{_libdir}/charset.alias
  prep_commands:
  - "$MOGRIX_ROOT/tools/safepatch Makefile.in --old 'gnulib-tests' --new '' --no-backup --quiet || true"
  - "$MOGRIX_ROOT/tools/safepatch Makefile.am --old 'gnulib-tests' --new '' --no-backup --quiet || true"
  - "$MOGRIX_ROOT/tools/safepatch src/Makefile.in --old '-lselinux' --new '' --count 0 --no-backup --quiet || true"
