# ctags - universal ctags source code indexer
package: ctags

rules:
  drop_buildrequires:
    - libseccomp-devel
    - python3-docutils
  configure_disable:
    - seccomp
  prep_commands:
    # Fix missing errno include in acutest test header
    - "$MOGRIX_ROOT/tools/safepatch extra-cmds/acutest.h --insert-top '#include <errno.h>' --no-backup --quiet"
  spec_replacements:
    # IRIX scandir uses non-const dirent* â€” suppress pointer type mismatch
    - pattern: "./autogen.sh"
      replacement: "./autogen.sh\nexport CFLAGS=\"${CFLAGS} -Wno-incompatible-function-pointer-types\""
    # Man pages not built (no python3-docutils/rst2man)
    - pattern: "%{_mandir}/man1/*"
      replacement: "# man pages not available in cross-build"
    - pattern: "%{_mandir}/man5/*"
      replacement: "# man5 pages not available in cross-build"
    - pattern: "%{_mandir}/man7/*"
      replacement: "# man7 pages not available in cross-build"
