# libxml2 - XML parsing library
# Successfully cross-compiled for IRIX N32
# Note: pthread causes crashes on IRIX, so threads are disabled

package: libxml2


# IRIX-specific patches from SGUG-RSE
add_patch:
  - libxml2.sgifixes.patch

rules:
  # Compat functions that may be needed
  inject_compat_functions:
    - strdup
    - strndup

  # Configure flags
  configure_flags:
    add:
      - --disable-silent-rules
      - --without-python
      - --without-icu
      - --without-zlib
      - --without-lzma
      - --without-threads    # CRITICAL: pthread crashes IRIX rld
      - --without-tls
    remove:
      - --with-python
      - --with-zlib
      - --with-lzma
      - --with-threads
      - --with-tls

  configure_disable:
    - static
