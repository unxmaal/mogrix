# gnupg2 - GNU Privacy Guard
# Has sgifixes patches, needs compat functions

package: gnupg2


# IRIX-specific patches from SGUG-RSE
add_patch:
  - gnupg2.sgifixes.patch

rules:
  # Compat functions needed
  inject_compat_functions:
    - strdup
    - strndup
    - asprintf
    - vasprintf
    - getline

  # NOTE: libdicl drop_buildrequires/drop_requires handled by generic.yaml
  drop_buildrequires:
    - libusb1-devel
    - openldap-devel

  drop_requires:
    - pinentry

  # Autoconf cache overrides
  # NOTE: ac_cv_func_malloc/realloc_0_nonnull handled by generic.yaml
  ac_cv_overrides:
    gl_cv_func_working_getdelim: "yes"

  # Configure flags
  configure_flags:
    add:
      - --disable-doc
      - --disable-ldap
      - --disable-ccid-driver
      - --disable-scdaemon
      - --disable-dirmngr
      - --disable-photo-viewers
      - --disable-card-support
      - --disable-wks-tools
      - --without-libusb
      - --without-readline
    remove:
      - --enable-g13
      - --enable-large-secmem

  # NOTE: libdicl remove_lines handled by generic.yaml
