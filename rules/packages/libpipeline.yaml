# libpipeline - Pipeline manipulation library (FC40: 1.5.7)
# Simple autoconf build. No external deps. Required by man-db.
# IRIX fix: clearenv() not available — provide compat implementation.
package: libpipeline

rules:
  drop_buildrequires:
    - check-devel

  prep_commands:
    # IRIX has no clearenv() — provide inline implementation
    - "$MOGRIX_ROOT/tools/safepatch lib/pipeline.c --old '#include \"pipeline-private.h\"' --insert-after $'#ifndef clearenv\\nextern char **environ;\\nstatic inline int clearenv(void) { environ = NULL; return 0; }\\n#endif' --no-backup --quiet"
