package: wget2
rules:
  drop_buildrequires:
  - git-core
  - pandoc
  - lcov
  - lzip
  - rsync
  - pkgconfig(gpgme)
  - pkgconfig(libbrotlidec)
  - pkgconfig(libmicrohttpd)
  - pkgconfig(libnghttp2)
  - pkgconfig(libpsl)
  spec_replacements:
  - pattern: '%bcond as_wget 1

      %endif'
    replacement: '%bcond as_wget 0

      %endif'
  - pattern: '%find_lang %{name}

      '
    replacement: ''
  - pattern: '%files -f %{name}.lang

      '
    replacement: '%files

      '
  - pattern: '%if 0%{?rhel}

      # tarball includes a pre-built manpage

      install -D -m0644 -t %{buildroot}%{_mandir}/man1/ docs/man/man1/wget2.1

      %endif'
    replacement: '# Install pre-built manpage from tarball (no pandoc for cross-build)

      install -D -m0644 -t %{buildroot}%{_mandir}/man1/ docs/man/man1/wget2.1'
  - pattern: '%{_mandir}/man3/libwget*.3*

      '
    replacement: ''
