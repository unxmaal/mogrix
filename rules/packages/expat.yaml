# expat - XML parser library (FC40: 2.6.0)
# Foundation library for fontconfig, libX11, and many other packages
package: expat

rules:
  inject_compat_functions:
    - strtof

  configure_flags:
    add:
      - --without-docbook
      - --without-examples
      - --without-tests

  # xmlto not available for cross-compilation; touch man page to prevent rebuild
  prep_commands:
    - "touch doc/xmlwf.1"

  # Remove duplicate docs and .la files
  install_cleanup:
    - "rm -rf $RPM_BUILD_ROOT%{_datadir}/doc/expat"
    - "find $RPM_BUILD_ROOT -name '*.la' -delete"

  # Man pages not compressed by our rpmbuild
  spec_replacements:
    - pattern: "%{_mandir}/man1/xmlwf.1*"
      replacement: "%{_mandir}/man1/*"
