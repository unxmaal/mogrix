# gmp - GNU Multiple Precision Arithmetic Library (FC40: 6.2.1)
package: gmp

rules:
  inject_compat_functions:
    - strdup

  drop_buildrequires:
    - gcc-c++
    - texinfo

  spec_replacements:
    # Switch from git-based autosetup to simple patch application
    - pattern: "%autosetup -S git -n %{name}-%{version}"
      replacement: "%autosetup -p1 -n %{name}-%{version}"

    # Remove info dir cleanup (texinfo dropped)
    - pattern: "rm -f ${RPM_BUILD_ROOT}%{_infodir}/dir"
      replacement: "rm -rf ${RPM_BUILD_ROOT}%{_infodir}"

    # Remove info files from %files
    - pattern: "%{_infodir}/gmp.info*"
      replacement: ""
