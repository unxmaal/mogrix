package: double-conversion
rules:
  spec_replacements:
  - pattern: '%cmake -DBUILD_TESTING=ON

      %cmake_build'
    replacement: "MOGRIX_TOOLCHAIN=/home/edodd/projects/github/unxmaal/mogrix/cross/cmake-irix-toolchain.cmake\ncmake -B _build \\\n  -DCMAKE_TOOLCHAIN_FILE=$MOGRIX_TOOLCHAIN \\\n  -DCMAKE_BUILD_TYPE=Release\
      \ \\\n  -DCMAKE_INSTALL_PREFIX=%{_prefix} \\\n  -DCMAKE_INSTALL_LIBDIR=lib32 \\\n  -DBUILD_TESTING=OFF \\\n  -DBUILD_SHARED_LIBS=ON\ncmake --build _build\n"
  - pattern: '%cmake_install'
    replacement: DESTDIR=$RPM_BUILD_ROOT cmake --install _build
  - pattern: 'Requires:       %{name}%{?_isa} = %{version}-%{release}'
    replacement: 'Requires:       %{name} = %{version}-%{release}'
  - pattern: '%{_libdir}/libdouble-conversion.so.3{,.*}'
    replacement: '%{_libdir}/libdouble-conversion.so.3*'
  - pattern: 'URL:            https://github.com/google/double-conversion'
    replacement: 'URL:            https://github.com/google/double-conversion

      Provides: libdouble-conversion.so.3(mips-32)

      Provides: double-conversion(mips-32) = %{version}-%{release}

      '
  install_cleanup:
  - rm -f %{buildroot}%{_libdir}/libdouble-conversion.a || true
