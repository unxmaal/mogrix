package: jq
rules:
  export_vars:
    LIBS: -lgen
  ac_cv_overrides:
    ac_cv_lib_m_acosh: 'no'
    ac_cv_lib_m_asinh: 'no'
    ac_cv_lib_m_atanh: 'no'
    ac_cv_lib_m_cbrt: 'no'
    ac_cv_lib_m_copysign: 'no'
    ac_cv_lib_m_drem: 'no'
    ac_cv_lib_m_erf: 'no'
    ac_cv_lib_m_erfc: 'no'
    ac_cv_lib_m_exp2: 'no'
    ac_cv_lib_m_expm1: 'no'
    ac_cv_lib_m_fdim: 'no'
    ac_cv_lib_m_fma: 'no'
    ac_cv_lib_m_fmin: 'no'
    ac_cv_lib_m_fmax: 'no'
    ac_cv_lib_m_gamma: 'no'
    ac_cv_lib_m_ilogb: 'no'
    ac_cv_lib_m_lgamma: 'no'
    ac_cv_lib_m_log1p: 'no'
    ac_cv_lib_m_log2: 'no'
    ac_cv_lib_m_logb: 'no'
    ac_cv_lib_m_nearbyint: 'no'
    ac_cv_lib_m_nextafter: 'no'
    ac_cv_lib_m_nexttoward: 'no'
    ac_cv_lib_m_remainder: 'no'
    ac_cv_lib_m_rint: 'no'
    ac_cv_lib_m_round: 'no'
    ac_cv_lib_m_scalb: 'no'
    ac_cv_lib_m_scalbn: 'no'
    ac_cv_lib_m_scalbln: 'no'
    ac_cv_lib_m_significand: 'no'
    ac_cv_lib_m_tgamma: 'no'
    ac_cv_lib_m_trunc: 'no'
    ac_cv_lib_m_j0: 'no'
    ac_cv_lib_m_j1: 'no'
    ac_cv_lib_m_jn: 'no'
    ac_cv_lib_m_y0: 'no'
    ac_cv_lib_m_y1: 'no'
    ac_cv_lib_m_yn: 'no'
    ac_cv_lib_m_ldexp: 'yes'
    ac_cv_lib_m_modf: 'yes'
    ac_cv_lib_m_frexp: 'yes'
    ac_cv_lib_m_floor: 'yes'
    ac_cv_lib_m_ceil: 'yes'
    ac_cv_lib_m_fabs: 'yes'
    ac_cv_lib_m_sqrt: 'yes'
    ac_cv_lib_m_sin: 'yes'
    ac_cv_lib_m_cos: 'yes'
    ac_cv_lib_m_tan: 'yes'
    ac_cv_lib_m_asin: 'yes'
    ac_cv_lib_m_acos: 'yes'
    ac_cv_lib_m_atan: 'yes'
    ac_cv_lib_m_atan2: 'yes'
    ac_cv_lib_m_sinh: 'yes'
    ac_cv_lib_m_cosh: 'yes'
    ac_cv_lib_m_tanh: 'yes'
    ac_cv_lib_m_exp: 'yes'
    ac_cv_lib_m_log: 'yes'
    ac_cv_lib_m_log10: 'yes'
    ac_cv_lib_m_pow: 'yes'
    ac_cv_lib_m_hypot: 'yes'
    ac_cv_lib_m_fmod: 'yes'
  install_cleanup:
  - find $RPM_BUILD_ROOT -name '*.la' -delete
  - rm -f $RPM_BUILD_ROOT%{_libdir}/libjq.a
  - rm -rf $RPM_BUILD_ROOT%{_datadir}/doc/jq
  add_requires:
  - oniguruma
  spec_replacements:
  - pattern: '%make_build'
    replacement: '/opt/sgug-staging/share/mogrix/fix-libtool-irix.sh libtool || exit 1

      %make_build

      '
  - pattern: chrpath -d %{buildroot}%{_bindir}/%{name}
    replacement: '# chrpath not needed for cross-compilation'
  - pattern: '%{_datadir}/man/man1/jq.1.gz'
    replacement: '%{_datadir}/man/man1/jq.1*'
