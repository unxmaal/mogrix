# cairo - 2D graphics library
# Has sgifixes patches, needs compat functions

package: cairo


# SGUG-RSE patch (cairo.sgifixes.patch) for RTLD_NEXT in util/cairo-sphinx/fdr.c
# dropped â€” only applies to 1.16.0, utility code not part of main library

rules:
  # Compat functions needed
  inject_compat_functions:
    - strdup
    - strndup

  # NOTE: libdicl drop_buildrequires/drop_requires handled by generic.yaml

  # Autoconf cache overrides
  # NOTE: ac_cv_func_malloc/realloc_0_nonnull handled by generic.yaml
  ac_cv_overrides:
    cairo_cv_atomic_primitives: "none"

  # Configure flags
  configure_flags:
    add:
      - --disable-silent-rules
      - --disable-gtk-doc
      - --disable-valgrind
      - --enable-xlib
      - --enable-ft
      - --enable-png
      - --enable-svg
    remove:
      - --enable-tee
      - --enable-gl

  skip_check: true

  # NOTE: libdicl remove_lines handled by generic.yaml
