diff -Naur tdnf-3.5.14.orig/client/includes.h tdnf-3.5.14/client/includes.h
--- tdnf-3.5.14.orig/client/includes.h	2025-11-21 00:49:53.000000000 +0000
+++ tdnf-3.5.14/client/includes.h	2026-02-02 13:23:50.348408105 +0000
@@ -8,12 +8,15 @@
 
 #ifndef __CLIENT_INCLUDES_H__
 #define __CLIENT_INCLUDES_H__
+#include <sys/types.h>
+#include <sys/bsd_types.h>
 
 #include <stdio.h>
 #include <stdint.h>
 #include <stdlib.h>
 #include <stdarg.h>
 #include <string.h>
+#include <strings.h>
 #include <errno.h>
 #include <stdbool.h>
 #include <unistd.h>
@@ -28,6 +31,7 @@
 #include <time.h>
 #include <sys/utsname.h>
 #include <sys/vfs.h>
+#include <sys/statfs.h>
 #include <sys/types.h>
 
 #include <dirent.h>
@@ -42,6 +46,7 @@
 #include <rpm/rpmts.h>
 #include <rpm/rpmkeyring.h>
 #include <rpm/header.h>
+#include <rpm/rpmmacro.h>
 
 //libcurl
 #include <curl/curl.h>
diff -Naur tdnf-3.5.14.orig/client/packageutils.c tdnf-3.5.14/client/packageutils.c
--- tdnf-3.5.14.orig/client/packageutils.c	2025-11-21 00:49:53.000000000 +0000
+++ tdnf-3.5.14/client/packageutils.c	2026-02-02 13:23:50.357408240 +0000
@@ -873,13 +873,13 @@
         BAIL_ON_TDNF_ERROR(dwError);
     }
 
-    if (statfs(pConf->pszCacheDir, &stfs) != 0)
+    if (statfs(pConf->pszCacheDir, &stfs, sizeof(stfs), 0) != 0)
     {
         dwError = errno;
         BAIL_ON_TDNF_SYSTEM_ERROR(dwError);
     }
 
-    *pqwAvailCacheDirBytes = stfs.f_bsize * stfs.f_bavail;
+    *pqwAvailCacheDirBytes = stfs.f_bsize * stfs.f_bfree;
 
 cleanup:
     return dwError;
diff -Naur tdnf-3.5.14.orig/common/includes.h tdnf-3.5.14/common/includes.h
--- tdnf-3.5.14.orig/common/includes.h	2025-11-21 00:49:53.000000000 +0000
+++ tdnf-3.5.14/common/includes.h	2026-02-02 13:23:50.327407792 +0000
@@ -15,6 +15,7 @@
 #include <stdint.h>
 #include <stdarg.h>
 #include <string.h>
+#include <strings.h>
 #include <errno.h>
 #include <stdbool.h>
 #include <fcntl.h>
diff -Naur tdnf-3.5.14.orig/solv/includes.h tdnf-3.5.14/solv/includes.h
--- tdnf-3.5.14.orig/solv/includes.h	2025-11-21 00:49:53.000000000 +0000
+++ tdnf-3.5.14/solv/includes.h	2026-02-02 13:24:34.387065017 +0000
@@ -5,6 +5,7 @@
 #include <stdint.h>
 #include <sys/utsname.h>
 #include <stdlib.h>
+#include <strings.h>
 #include <errno.h>
 #include <sys/stat.h>
 #include <unistd.h>
diff -Naur tdnf-3.5.14.orig/solv/tdnfpool.c tdnf-3.5.14/solv/tdnfpool.c
--- tdnf-3.5.14.orig/solv/tdnfpool.c	2025-11-21 00:49:53.000000000 +0000
+++ tdnf-3.5.14/solv/tdnfpool.c	2026-02-02 13:23:50.361408299 +0000
@@ -112,7 +112,7 @@
             dwError = ERROR_TDNF_SOLV_IO;
             BAIL_ON_TDNF_LIBSOLV_ERROR(dwError);
         }
-        pool_setarch(pPool, systemInfo.machine);
+        pool_setarch(pPool, "mips");
     } else {
         pool_setarch(pPool, pszArch);
     }
diff -Naur tdnf-3.5.14.orig/tools/cli/lib/includes.h tdnf-3.5.14/tools/cli/lib/includes.h
--- tdnf-3.5.14.orig/tools/cli/lib/includes.h	2025-11-21 00:49:53.000000000 +0000
+++ tdnf-3.5.14/tools/cli/lib/includes.h	2026-02-02 13:23:50.333407881 +0000
@@ -30,6 +30,7 @@
 #include <sys/ioctl.h>
 #include <unistd.h>
 #include <string.h>
+#include <strings.h>
 #include <ctype.h>
 #include <stdbool.h>
 
diff -Naur tdnf-3.5.14.orig/tools/cli/lib/output.c tdnf-3.5.14/tools/cli/lib/output.c
--- tdnf-3.5.14.orig/tools/cli/lib/output.c	2025-11-21 00:49:53.000000000 +0000
+++ tdnf-3.5.14/tools/cli/lib/output.c	2026-02-02 13:24:06.583650411 +0000
@@ -19,6 +19,9 @@
  *
  */
 
+#include <sys/ioccom.h>
+#include <sys/ttold.h>
+#include <sys/termios.h>
 #include "includes.h"
 
 uint32_t
