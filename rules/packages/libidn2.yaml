package: libidn2
rules:
  configure_flags:
    add:
    - --disable-nls
    - --disable-doc
  drop_subpackages:
  - idn2
  export_vars:
    LD: /opt/cross/bin/mips-sgi-irix6.5-ld.bfd
  spec_replacements:
  - pattern: '%configure --disable-static'
    replacement: '%configure --disable-static

      $MOGRIX_ROOT/tools/fix-libtool-irix.sh libtool || exit 1

      '
  - pattern: '%make_build -C doc html'
    replacement: ': # skip doc html build'
  - pattern: '%doc doc/%{name}.html examples'
    replacement: '%doc examples'
  - pattern: '%{_mandir}/man3/idn2_*.3*'
    replacement: ''
  - pattern: '%{_datadir}/gtk-doc/'
    replacement: ''
  - pattern: '%{_infodir}/%{name}.info*'
    replacement: ''
  - pattern: rm -f $RPM_BUILD_ROOT%{_datadir}/info/dir
    replacement: ': # skip info dir cleanup'
  - pattern: '%files -f %{name}.lang'
    replacement: '%files'
  install_cleanup:
  - find $RPM_BUILD_ROOT -name '*.la' -delete
  - rm -rf $RPM_BUILD_ROOT%{_datadir}/locale
  - rm -rf $RPM_BUILD_ROOT%{_datadir}/info
  - rm -rf $RPM_BUILD_ROOT%{_datadir}/man
  - rm -rf $RPM_BUILD_ROOT%{_datadir}/gtk-doc
  - rm -f $RPM_BUILD_ROOT%{_bindir}/idn2
