# npth - New GNU Portable Threads library
# Build system: autoconf (simple, uses pthreads)
# Very simple package â€” wraps POSIX threads with cooperative scheduling API

package: npth

rules:
  # IRIX puts pthread_atfork in unistd.h, not pthread.h
  # Add include so the declaration is visible
  prep_commands:
    - "$MOGRIX_ROOT/tools/safepatch src/npth.h.in --old '#include <pthread.h>' --insert-after '#include <unistd.h>' --no-backup --quiet"

  configure_flags:
    add:
      - --disable-static

  install_cleanup:
    - "rm -f %{buildroot}%{_libdir}/*.a"
