# libgpg-error - GnuPG error library
# Needs compat functions for IRIX

package: libgpg-error

rules:
  # Compat functions needed
  inject_compat_functions:
    - strdup
    - strndup

  # Drop libdicl dependency
  drop_buildrequires:
    - libdicl-devel
    - libdicl

  drop_requires:
    - libdicl
    - libdicl-devel

  # Autoconf cache overrides
  ac_cv_overrides:
    ac_cv_func_malloc_0_nonnull: "yes"
    ac_cv_func_realloc_0_nonnull: "yes"

  # Configure flags
  configure_flags:
    add:
      - --disable-languages
      - --disable-doc
    remove:
      - --with-libiconv-prefix
